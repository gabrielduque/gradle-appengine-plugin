// Allows a compileJavaTask to run in Java8 mode.
// Setting the system property "jdk8.home" to a JDK8 installation links the
// compatibility libraries for the task, otherwise gradle throws a warning

ext.setJava8Mode = { compileJavaTask ->
    compileJavaTask.sourceCompatibility = 1.8
    compileJavaTask.targetCompatibility = 1.8
    // if jdk8.home is defined use it
    def jdk8Home = System.properties['jdk8.home']
    if(jdk8Home) {
        compileJavaTask.options.bootClasspath = (new File(jdk8Home,"/jre/lib/rt.jar")).canonicalPath
    }
}
